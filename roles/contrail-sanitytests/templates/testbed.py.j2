{% set contrail_host_ip = hostvars[inventory_hostname]['ansible_host'] -%}

from fabric.api import env
import subprocess

host1 = "root@{{ contrail_host_ip }}"
host_build = 'root@{{ contrail_host_ip }}'
ext_routers = []

env.roledefs = {
    'all': ['{{ contrail_host_ip }}'],
    'openstack': ['{{ contrail_host_ip }}'],
    'cfgm': ['{{ contrail_host_ip }}'],
    'control': ['{{ contrail_host_ip }}'],
    'collector': ['{{ contrail_host_ip }}'],
    'webui': ['{{ contrail_host_ip }}'],
    'database': ['{{ contrail_host_ip }}'],
    'compute': ['{{ contrail_host_ip }}'],
    'build': [host_build],
    'storage-master': ['{{ contrail_host_ip }}'],
    'storage-compute': ['{{ contrail_host_ip }}']
}

env.ntp_server = '10.84.5.100'
env.openstack_admin_password = 'c0ntrail123'

env.hostnames = { 'all': ['{{ contrail_host_ip }}']}
env.password = 'c0ntrail123'
env.passwords = { host1: 'c0ntrail123', host_build: 'c0ntrail123'}
env.ostypes = { host1: 'centos'}

env.webui = 'firefox'
env.devstack = False
env.test_retry_factor = 1.0
env.test_delay_factor = 1.0
env.kernel_upgrade = False

env.test_repo_dir='/contrail-test'
env.test_verify_on_setup = True

env.http_proxy = ""

env.test = {
    'webserver_host': '{{ contrail_host_ip }}',
    'webserver_user': 'zuul',
    'webserver_password': 'c0ntrail!23',
    'webserver_log_path': '{{ ansible_env.HOME }}/logs',
    'webserver_report_path': '{{ ansible_env.HOME }}/sanity',
    'webroot': '{{ ansible_env.HOME }}/logs',
    'mail_server': '{{ contrail_host_ip }}',
    'mail_port': '25',
    'mail_sender': 'contrailbuild@juniper.net',
}
